<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSC Center - Sanjay Computer Center</title>
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ’»</text></svg>">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        :root {
            --primary-color: #1e3c72;
            --secondary-color: #2a5298;
            --accent-color: #4CAF50;
            --text-light: rgba(255,255,255,0.9);
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 2rem;
        }

        body {
            background-color: #f8f9fa;
        }

        /* Modern Navigation Styles */
        .main-nav {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            padding: var(--spacing-md) 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: var(--spacing-lg);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .brand-container {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .app-title {
            color: white;
            font-size: 2rem;
            font-weight: 700;
            margin: 0;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            line-height: 1.2;
        }

        .app-subtitle {
            color: var(--text-light);
            font-size: 1rem;
            margin: 0;
            font-weight: 400;
            letter-spacing: 1px;
        }

        .main-nav .navbar-toggler {
            color: white;
            border: 1px solid rgba(255,255,255,0.5);
            padding: var(--spacing-sm) var(--spacing-md);
        }

        .main-nav .nav-link {
            color: var(--text-light);
            font-size: 1.1rem;
            padding: 0.8rem 2rem;
            margin: 0 0.5rem;
            border-radius: 25px;
            transition: all 0.3s ease;
            cursor: pointer;
            user-select: none;
            font-weight: 500;
        }

        .main-nav .nav-link:hover {
            color: white;
            background: rgba(255,255,255,0.1);
            transform: translateY(-2px);
        }

        .main-nav .nav-link.active {
            color: var(--primary-color);
            background: white;
            font-weight: 600;
        }

        .main-nav .nav-link i {
            margin-right: var(--spacing-sm);
        }

        /* Mobile Navigation */
        @media (max-width: 768px) {
            .app-title {
                font-size: 1.5rem;
            }
            
            .app-subtitle {
                font-size: 0.9rem;
            }

            .main-nav .nav-link {
                margin: var(--spacing-sm) 0;
                text-align: center;
            }

            .main-nav .navbar-collapse {
                background: rgba(255,255,255,0.1);
                padding: var(--spacing-md);
                border-radius: 10px;
                margin-top: var(--spacing-md);
            }

            .brand-container {
                max-width: 80%;
            }
        }

        /* Section Styles */
        .main-section {
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .main-section.active {
            display: block !important;
            opacity: 1;
        }

        /* Card Styles */
        .section-card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.05);
            padding: 2rem;
            margin-bottom: 2rem;
            transition: transform 0.2s ease;
        }

        .section-card:hover {
            transform: translateY(-2px);
        }

        /* Account Card Styles */
        .account-card {
            background: linear-gradient(135deg, #f6f9fc 0%, #ffffff 100%);
            border: 1px solid #e0e6ed;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .account-card:hover {
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .account-card .balance {
            font-size: 2rem;
            font-weight: 600;
            color: #1e3c72;
        }

        .account-card .account-number {
            color: #6c757d;
            font-size: 0.9rem;
        }

        /* Transaction History Table */
        .transaction-table {
            border-collapse: separate;
            border-spacing: 0;
        }

        .transaction-table th {
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
            padding: 1rem;
        }

        .transaction-table td {
            padding: 1rem;
            border-bottom: 1px solid #dee2e6;
            vertical-align: middle;
        }

        .transaction-table tr:last-child td {
            border-bottom: none;
        }

        /* Customer Table */
        .customer-table {
            border-collapse: separate;
            border-spacing: 0;
        }

        .customer-table th {
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
            padding: 1rem;
            white-space: nowrap;
        }

        .customer-table td {
            padding: 1rem;
            border-bottom: 1px solid #dee2e6;
            vertical-align: middle;
        }

        .customer-table tr:hover {
            background: #f8f9fa;
        }

        /* Form Controls */
        .form-control:focus {
            border-color: #1e3c72;
            box-shadow: 0 0 0 0.2rem rgba(30, 60, 114, 0.25);
        }

        /* Buttons */
        .btn-primary {
            background: #1e3c72;
            border-color: #1e3c72;
        }

        .btn-primary:hover {
            background: #2a5298;
            border-color: #2a5298;
        }

        /* Success Modal */
        .success-icon {
            color: #28a745;
            font-size: 4rem;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <!-- Main Navigation -->
    <nav class="main-nav navbar navbar-expand-md">
        <div class="container">
            <div class="brand-container">
                <h1 class="app-title">CSC Center</h1>
                <p class="app-subtitle">Sanjay Computer Center</p>
            </div>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
                <i class="fas fa-bars"></i>
            </button>
            <div class="collapse navbar-collapse" id="mainNav">
                <ul class="nav nav-pills ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" onclick="showMainSection('billingSection')">
                            <i class="fas fa-file-invoice"></i> Billing
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" onclick="showMainSection('bankingSection')">
                            <i class="fas fa-university"></i> Banking
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" onclick="showMainSection('customerSection')">
                            <i class="fas fa-users"></i> Customers
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <!-- Billing Section -->
        <div id="billingSection" class="main-section active">
            <div class="section-card">
                <h2 class="mb-4">Create New Bill</h2>
                <form id="billingForm">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Customer Name*</label>
                            <input type="text" class="form-control" id="customerName" required>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Mobile Number</label>
                            <input type="tel" class="form-control" id="mobileNumber" pattern="[0-9]{10}">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Address</label>
                        <textarea class="form-control" id="address" rows="2"></textarea>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Date</label>
                        <input type="date" class="form-control" id="billDate" required>
                    </div>
                    <div id="itemsContainer">
                        <!-- Items will be added here -->
                    </div>
                    <button type="button" class="btn btn-secondary mb-3" onclick="addItem()">Add Item</button>
                    <div class="row mb-3">
                        <div class="col">
                            <h4>Total Amount: â‚¹<span id="totalAmount">0.00</span></h4>
                        </div>
                    </div>
                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-primary">Generate Bill</button>
                        <button type="button" class="btn btn-danger" onclick="clearForm()">Clear</button>
                    </div>
                </form>
            </div>
            <div class="section-card">
                <h2 class="mb-4">Search Bills</h2>
                <div class="row g-3">
                    <div class="col-md-5">
                        <input type="text" class="form-control" id="searchName" placeholder="Search by name">
                    </div>
                    <div class="col-md-5">
                        <input type="text" class="form-control" id="searchMobile" placeholder="Search by mobile">
                    </div>
                    <div class="col-md-2">
                        <button class="btn btn-primary w-100" onclick="searchBills()">Search</button>
                    </div>
                </div>
                <div id="searchResults" class="mt-4"></div>
            </div>
        </div>

        <!-- Banking Section -->
        <div id="bankingSection" class="main-section">
            <div class="section-card">
                <h2 class="mb-4">Mini Bank</h2>
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="account-card">
                            <h5 class="card-title">Savings Account</h5>
                            <div class="balance">â‚¹<span id="savingsBalance">0.00</span></div>
                            <div class="account-number">Account #: SA-001</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="account-card">
                            <h5 class="card-title">Current Account</h5>
                            <div class="balance">â‚¹<span id="currentBalance">0.00</span></div>
                            <div class="account-number">Account #: CA-001</div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <button class="btn btn-primary w-100 mb-3" onclick="showBankSection('deposit')">
                            <i class="fas fa-plus-circle me-2"></i>Deposit
                        </button>
                    </div>
                    <div class="col-md-4">
                        <button class="btn btn-primary w-100 mb-3" onclick="showBankSection('withdraw')">
                            <i class="fas fa-minus-circle me-2"></i>Withdraw
                        </button>
                    </div>
                    <div class="col-md-4">
                        <button class="btn btn-primary w-100 mb-3" onclick="showBankSection('transfer')">
                            <i class="fas fa-exchange-alt me-2"></i>Transfer
                        </button>
                    </div>
                </div>
            </div>
            <div class="section-card">
                <h2 class="mb-4">Transaction History</h2>
                <div class="table-responsive">
                    <table class="table transaction-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Type</th>
                                <th>Account</th>
                                <th>Amount</th>
                                <th>Balance</th>
                            </tr>
                        </thead>
                        <tbody id="transactionHistory"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Customer Section -->
        <div id="customerSection" class="main-section">
            <div class="section-card">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 class="mb-0">Customer Management</h2>
                    <button class="btn btn-primary" onclick="showAddCustomerModal()">
                        <i class="fas fa-plus me-2"></i>Add New Customer
                    </button>
                </div>
                <div class="mb-3">
                    <div class="input-group">
                        <span class="input-group-text">
                            <i class="fas fa-search"></i>
                        </span>
                        <input type="text" class="form-control" id="customerSearch" 
                               placeholder="Search customers by name, mobile, or Aadhaar..." 
                               onkeyup="searchCustomers()">
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table customer-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Mobile</th>
                                <th>Aadhaar</th>
                                <th>Email</th>
                                <th>Address</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="customerTableBody">
                            <!-- Customer data will be dynamically added -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal fade" id="successModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body text-center">
                    <div class="text-success display-1 mb-4">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h4 class="mb-2">Success!</h4>
                    <p class="text-muted" id="successMessage"></p>
                </div>
                <div class="modal-footer justify-content-center">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Customer Modal -->
    <div class="modal fade" id="customerModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="customerModalTitle">Add Customer</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="customerForm" onsubmit="event.preventDefault(); saveCustomer();">
                        <div id="customerFormFields">
                            <!-- Fields will be dynamically added here -->
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-primary">Save</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize all required variables
        let customers = JSON.parse(localStorage.getItem('customers')) || [];
        let editingCustomerId = null;
        let customerModal = null;
        let successModal = null;

        // Main Navigation Function
        function showMainSection(section) {
            // Hide all sections first
            document.querySelectorAll('.main-section').forEach(s => {
                s.style.display = 'none';
                s.classList.remove('active');
            });
            
            // Show selected section
            const selectedSection = document.getElementById(section);
            if (selectedSection) {
                selectedSection.style.display = 'block';
                // Force a reflow before adding the active class
                selectedSection.offsetHeight;
                selectedSection.classList.add('active');
            }
            
            // Update navigation
            document.querySelectorAll('.main-nav .nav-link').forEach(link => {
                link.classList.remove('active');
            });
            const activeLink = document.querySelector(`.nav-link[onclick*="${section}"]`);
            if (activeLink) {
                activeLink.classList.add('active');
            }

            // Initialize section content
            if (section === 'bankingSection') {
                updateBalanceDisplay();
                updateTransactionHistory();
            } else if (section === 'customerSection') {
                updateCustomerTable();
            }

            // Close mobile menu
            const navbarCollapse = document.getElementById('mainNav');
            const bsCollapse = bootstrap.Collapse.getInstance(navbarCollapse);
            if (bsCollapse) {
                bsCollapse.hide();
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize modals
            customerModal = new bootstrap.Modal(document.getElementById('customerModal'));
            successModal = new bootstrap.Modal(document.getElementById('successModal'));
            
            // Set current date for billing
            document.getElementById('billDate').valueAsDate = new Date();
            
            // Show billing section by default and initialize all sections
            showMainSection('billingSection');
            updateCustomerTable();
            updateBalanceDisplay();
            updateTransactionHistory();
            
            // Add event listeners for mobile menu
            const navbarToggler = document.querySelector('.navbar-toggler');
            const navbarCollapse = document.getElementById('mainNav');
            
            navbarToggler.addEventListener('click', function() {
                const bsCollapse = bootstrap.Collapse.getInstance(navbarCollapse);
                if (!bsCollapse) {
                    new bootstrap.Collapse(navbarCollapse);
                }
            });

            // Add click event listeners to nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.getAttribute('onclick').match(/'([^']+)'/)[1];
                    showMainSection(section);
                });
            });
        });

        // Show success message
        function showSuccess(message) {
            document.getElementById('successMessage').textContent = message;
            successModal.show();
        }

        // Banking Functions
        function updateBalanceDisplay() {
            const accounts = JSON.parse(localStorage.getItem('accounts')) || {
                savings: 0,
                current: 0
            };
            document.getElementById('savingsBalance').textContent = accounts.savings.toFixed(2);
            document.getElementById('currentBalance').textContent = accounts.current.toFixed(2);
        }

        function updateTransactionHistory() {
            const transactions = JSON.parse(localStorage.getItem('transactions')) || [];
            const tbody = document.getElementById('transactionHistory');
            tbody.innerHTML = '';
            
            transactions.sort((a, b) => new Date(b.date) - new Date(a.date))
                .slice(0, 10)
                .forEach(transaction => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${new Date(transaction.date).toLocaleDateString()}</td>
                        <td>${transaction.type}</td>
                        <td>${transaction.account}</td>
                        <td>â‚¹${transaction.amount.toFixed(2)}</td>
                        <td>â‚¹${transaction.balance.toFixed(2)}</td>
                    `;
                    tbody.appendChild(row);
                });
        }

        function showBankSection(type) {
            // Implementation for bank operations
            let title = '';
            let message = '';
            let amount = 0;
            
            switch(type) {
                case 'deposit':
                    amount = parseFloat(prompt('Enter amount to deposit:'));
                    if (!amount || amount <= 0) return;
                    
                    const depositAccount = prompt('Enter account type (savings/current):').toLowerCase();
                    if (!['savings', 'current'].includes(depositAccount)) return;
                    
                    const accounts = JSON.parse(localStorage.getItem('accounts')) || { savings: 0, current: 0 };
                    accounts[depositAccount] += amount;
                    
                    localStorage.setItem('accounts', JSON.stringify(accounts));
                    
                    const transactions = JSON.parse(localStorage.getItem('transactions')) || [];
                    transactions.push({
                        date: new Date(),
                        type: 'Deposit',
                        account: depositAccount,
                        amount: amount,
                        balance: accounts[depositAccount]
                    });
                    localStorage.setItem('transactions', JSON.stringify(transactions));
                    
                    updateBalanceDisplay();
                    updateTransactionHistory();
                    showSuccess('Amount deposited successfully!');
                    break;
                    
                case 'withdraw':
                    amount = parseFloat(prompt('Enter amount to withdraw:'));
                    if (!amount || amount <= 0) return;
                    
                    const withdrawAccount = prompt('Enter account type (savings/current):').toLowerCase();
                    if (!['savings', 'current'].includes(withdrawAccount)) return;
                    
                    const withdrawAccounts = JSON.parse(localStorage.getItem('accounts')) || { savings: 0, current: 0 };
                    if (withdrawAccounts[withdrawAccount] < amount) {
                        alert('Insufficient balance!');
                        return;
                    }
                    
                    withdrawAccounts[withdrawAccount] -= amount;
                    localStorage.setItem('accounts', JSON.stringify(withdrawAccounts));
                    
                    const withdrawTransactions = JSON.parse(localStorage.getItem('transactions')) || [];
                    withdrawTransactions.push({
                        date: new Date(),
                        type: 'Withdrawal',
                        account: withdrawAccount,
                        amount: -amount,
                        balance: withdrawAccounts[withdrawAccount]
                    });
                    localStorage.setItem('transactions', JSON.stringify(withdrawTransactions));
                    
                    updateBalanceDisplay();
                    updateTransactionHistory();
                    showSuccess('Amount withdrawn successfully!');
                    break;
                    
                case 'transfer':
                    amount = parseFloat(prompt('Enter amount to transfer:'));
                    if (!amount || amount <= 0) return;
                    
                    const fromAccount = prompt('Enter FROM account (savings/current):').toLowerCase();
                    const toAccount = prompt('Enter TO account (savings/current):').toLowerCase();
                    
                    if (!['savings', 'current'].includes(fromAccount) || !['savings', 'current'].includes(toAccount)) return;
                    if (fromAccount === toAccount) {
                        alert('Cannot transfer to same account!');
                        return;
                    }
                    
                    const transferAccounts = JSON.parse(localStorage.getItem('accounts')) || { savings: 0, current: 0 };
                    if (transferAccounts[fromAccount] < amount) {
                        alert('Insufficient balance!');
                        return;
                    }
                    
                    transferAccounts[fromAccount] -= amount;
                    transferAccounts[toAccount] += amount;
                    localStorage.setItem('accounts', JSON.stringify(transferAccounts));
                    
                    const transferTransactions = JSON.parse(localStorage.getItem('transactions')) || [];
                    transferTransactions.push({
                        date: new Date(),
                        type: 'Transfer Out',
                        account: fromAccount,
                        amount: -amount,
                        balance: transferAccounts[fromAccount]
                    });
                    transferTransactions.push({
                        date: new Date(),
                        type: 'Transfer In',
                        account: toAccount,
                        amount: amount,
                        balance: transferAccounts[toAccount]
                    });
                    localStorage.setItem('transactions', JSON.stringify(transferTransactions));
                    
                    updateBalanceDisplay();
                    updateTransactionHistory();
                    showSuccess('Amount transferred successfully!');
                    break;
            }
        }

        // Customer Management Functions
        function updateCustomerTable() {
            const tbody = document.getElementById('customerTableBody');
            tbody.innerHTML = '';
            
            customers.forEach((customer, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${customer.name}</td>
                    <td>${customer.mobile || '-'}</td>
                    <td>${customer.aadhaar || '-'}</td>
                    <td>${customer.email || '-'}</td>
                    <td>${customer.address || '-'}</td>
                    <td>
                        <button class="btn btn-sm btn-primary me-1" onclick="editCustomer(${index})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteCustomer(${index})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function searchCustomers() {
            const searchTerm = document.getElementById('customerSearch').value.toLowerCase();
            const tbody = document.getElementById('customerTableBody');
            tbody.innerHTML = '';
            
            customers.forEach((customer, index) => {
                if (
                    customer.name.toLowerCase().includes(searchTerm) ||
                    (customer.mobile && customer.mobile.includes(searchTerm)) ||
                    (customer.aadhaar && customer.aadhaar.includes(searchTerm))
                ) {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${customer.name}</td>
                        <td>${customer.mobile || '-'}</td>
                        <td>${customer.aadhaar || '-'}</td>
                        <td>${customer.email || '-'}</td>
                        <td>${customer.address || '-'}</td>
                        <td>
                            <button class="btn btn-sm btn-primary me-1" onclick="editCustomer(${index})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-sm btn-danger" onclick="deleteCustomer(${index})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    `;
                    tbody.appendChild(row);
                }
            });
        }

        function showAddCustomerModal() {
            editingCustomerId = null;
            document.getElementById('customerModalTitle').textContent = 'Add Customer';
            document.getElementById('customerFormFields').innerHTML = `
                <div class="mb-3">
                    <label class="form-label">Name*</label>
                    <input type="text" class="form-control" name="name" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Mobile Number</label>
                    <input type="tel" class="form-control" name="mobile" pattern="[0-9]{10}" title="Please enter a valid 10-digit mobile number">
                </div>
                <div class="mb-3">
                    <label class="form-label">Aadhaar Number</label>
                    <input type="text" class="form-control" name="aadhaar" pattern="[0-9]{12}" title="Please enter a valid 12-digit Aadhaar number">
                </div>
                <div class="mb-3">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-control" name="email">
                </div>
                <div class="mb-3">
                    <label class="form-label">Address</label>
                    <textarea class="form-control" name="address" rows="2"></textarea>
                </div>
            `;
            customerModal.show();
        }

        function editCustomer(index) {
            editingCustomerId = index;
            const customer = customers[index];
            document.getElementById('customerModalTitle').textContent = 'Edit Customer';
            document.getElementById('customerFormFields').innerHTML = `
                <div class="mb-3">
                    <label class="form-label">Name*</label>
                    <input type="text" class="form-control" name="name" value="${customer.name}" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">Mobile Number</label>
                    <input type="tel" class="form-control" name="mobile" value="${customer.mobile || ''}" pattern="[0-9]{10}" title="Please enter a valid 10-digit mobile number">
                </div>
                <div class="mb-3">
                    <label class="form-label">Aadhaar Number</label>
                    <input type="text" class="form-control" name="aadhaar" value="${customer.aadhaar || ''}" pattern="[0-9]{12}" title="Please enter a valid 12-digit Aadhaar number">
                </div>
                <div class="mb-3">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-control" name="email" value="${customer.email || ''}">
                </div>
                <div class="mb-3">
                    <label class="form-label">Address</label>
                    <textarea class="form-control" name="address" rows="2">${customer.address || ''}</textarea>
                </div>
            `;
            customerModal.show();
        }

        function saveCustomer() {
            const form = document.getElementById('customerForm');
            const formData = new FormData(form);
            const customer = Object.fromEntries(formData.entries());
            
            // Validate required fields
            if (!customer.name) {
                alert('Name is required!');
                return;
            }
            
            // Validate mobile number format
            if (customer.mobile && !/^[0-9]{10}$/.test(customer.mobile)) {
                alert('Please enter a valid 10-digit mobile number!');
                return;
            }
            
            // Validate Aadhaar number format
            if (customer.aadhaar && !/^[0-9]{12}$/.test(customer.aadhaar)) {
                alert('Please enter a valid 12-digit Aadhaar number!');
                return;
            }
            
            if (editingCustomerId !== null) {
                customers[editingCustomerId] = customer;
            } else {
                customers.push(customer);
            }
            
            localStorage.setItem('customers', JSON.stringify(customers));
            customerModal.hide();
            updateCustomerTable();
            showSuccess(editingCustomerId !== null ? 'Customer updated successfully!' : 'Customer added successfully!');
        }

        function deleteCustomer(index) {
            if (confirm('Are you sure you want to delete this customer?')) {
                customers.splice(index, 1);
                localStorage.setItem('customers', JSON.stringify(customers));
                updateCustomerTable();
                showSuccess('Customer deleted successfully!');
            }
        }
    </script>
</body>
</html>
